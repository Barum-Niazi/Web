<div class="carousel-container">
    <div
        id="carouselExampleIndicators"
        class="carousel carousel-dark slide"
        data-bs-ride="carousel"
    >
        <div class="carousel-indicators">
            <% carouselGames.forEach((game, index) => { %>
            <button
                type="button"
                data-bs-target="#carouselExampleIndicators"
                data-bs-slide-to="<%= index %>"
                class="<%= index === 0 ? 'active' : '' %>"
                aria-current="<%= index === 0 ? 'true' : '' %>"
                aria-label="Slide <%= index + 1 %>"
            ></button>
            <% }) %>
        </div>
        <div class="carousel-inner">
            <% carouselGames.forEach((game, index) => { %>
            <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                <img
                    src="<%= game.coverImage %>"
                    class="d-block w-100"
                    alt="<%= game.name %>"
                />
                <div class="carousel-overlay">
                    <%= game.name %> - <%= game.description.substring(0, 100)
                    %>...
                </div>
            </div>
            <% }) %>
        </div>
        <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#carouselExampleIndicators"
            data-bs-slide="prev"
        >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#carouselExampleIndicators"
            data-bs-slide="next"
        >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</div>
<% if (flash) { %>
<div
    class="alert alert-<%= flash.type %> alert-dismissible fade show"
    role="alert"
>
    <%= flash.message %>
</div>
<% } %>
<div class="featured-games">
    <h1>FEATURED GAMES</h1>
    <div class="cards-div">
        <% games.forEach(game => { %>
        <div class="card" data-name="<%= game.name %>">
            <img src="<%= game.coverImage %>" class="card-img" />
            <div class="card-body">
                <h5 class="card-title"><%= game.name %></h5>
                <p class="card-text">$<%= game.price %></p>
                <p class="card-rating">
                    <% for (let i = 0; i < Math.floor(game.rating); i++) { %>
                    <i class="fas fa-star"></i>
                    <% } %> <% if (game.rating % 1 !== 0) { %>
                    <i class="fas fa-star-half-alt"></i>
                    <% } %>
                </p>
                <a
                    href="#"
                    class="btn btn-secondary cart-button"
                    data-game-name="<%= game.name %>"
                >
                    <i class="bi bi-cart"></i>
                    <span class="d-none d-md-inline">Add to Cart</span>
                </a>
            </div>
        </div>
        <% }) %>
    </div>
    <h1>CUSTOMERS CHOOSE</h1>
    <div class="customers-div">
        <% customersChoice.forEach (game => { %>
        <div class="customer-img-container">
            <img
                class="customer-img"
                src="<%= game.coverImage %>"
                alt="<%= game.name %>"
            />
            <div class="customer-overlay"><%= game.name %></div>
        </div>
        <% }) %>
    </div>
</div>
<script src="/js/descriptionAndCartScript.js"></script>
<script src="/js/search.js"></script>
